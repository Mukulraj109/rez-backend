# =============================================
# REZ BACKEND - PRODUCTION ENVIRONMENT
# =============================================
# Copy this file to .env.production and fill in your production values
# NEVER commit .env.production to version control!

# Core Settings
NODE_ENV=production
PORT=5001
API_VERSION=v1
API_PREFIX=/api

# =============================================
# DATABASE (Required)
# =============================================
# Use MongoDB Atlas for production: https://www.mongodb.com/atlas
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/rez-production?retryWrites=true&w=majority

# Redis for caching and sessions (Use Redis Cloud or AWS ElastiCache)
REDIS_URL=redis://username:password@redis-host:6379

# =============================================
# AUTHENTICATION (Required - Generate Strong Secrets!)
# =============================================
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=GENERATE_64_BYTE_HEX_SECRET_HERE
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=GENERATE_DIFFERENT_64_BYTE_HEX_SECRET
JWT_REFRESH_EXPIRES_IN=30d

# Merchant Authentication (Use different secret from user auth)
JWT_MERCHANT_SECRET=GENERATE_ANOTHER_64_BYTE_HEX_SECRET
JWT_MERCHANT_EXPIRES_IN=7d

# Cookie Secret (for CSRF protection)
COOKIE_SECRET=GENERATE_ANOTHER_SECRET_HERE

# =============================================
# FRONTEND URLs (Required)
# =============================================
FRONTEND_URL=https://app.yourrezapp.com
MERCHANT_FRONTEND_URL=https://merchant.yourrezapp.com
CORS_ORIGIN=https://app.yourrezapp.com,https://merchant.yourrezapp.com

# =============================================
# PAYMENT GATEWAYS (Required for transactions)
# =============================================
# Razorpay Production Keys - https://dashboard.razorpay.com
PAYMENT_GATEWAY=razorpay
RAZORPAY_KEY_ID=rzp_live_XXXXXXXXXXXX
RAZORPAY_KEY_SECRET=XXXXXXXXXXXXXXXXXXXX
RAZORPAY_WEBHOOK_SECRET=XXXXXXXXXXXXXXXXXXXX
RAZORPAY_ACCOUNT_NUMBER=XXXXXXXXXXXXXXXXXXXX

# Stripe Production Keys - https://dashboard.stripe.com
STRIPE_SECRET_KEY=sk_live_XXXXXXXXXXXXXXXXXXXX
STRIPE_PUBLISHABLE_KEY=pk_live_XXXXXXXXXXXXXXXXXXXX
STRIPE_WEBHOOK_SECRET=whsec_XXXXXXXXXXXXXXXXXXXX

# =============================================
# EMAIL SERVICE (Required for notifications)
# =============================================
# SendGrid - https://sendgrid.com
SENDGRID_API_KEY=SG.XXXXXXXXXXXXXXXXXXXX
SENDGRID_FROM_EMAIL=noreply@yourrezapp.com
SENDGRID_FROM_NAME=REZ App

# =============================================
# SMS SERVICE (Required for OTP)
# =============================================
# Twilio - https://twilio.com
TWILIO_ACCOUNT_SID=ACXXXXXXXXXXXXXXXXXXXX
TWILIO_AUTH_TOKEN=XXXXXXXXXXXXXXXXXXXX
TWILIO_PHONE_NUMBER=+1XXXXXXXXXX

# OTP Settings
OTP_EXPIRY_MINUTES=5
OTP_MAX_ATTEMPTS=3

# =============================================
# CLOUD STORAGE (Required for uploads)
# =============================================
CLOUD_STORAGE_PROVIDER=cloudinary

# Cloudinary - https://cloudinary.com
CLOUDINARY_CLOUD_NAME=your-cloud-name
CLOUDINARY_API_KEY=XXXXXXXXXXXX
CLOUDINARY_API_SECRET=XXXXXXXXXXXXXXXXXXXX

# OR AWS S3
# AWS_ACCESS_KEY_ID=AKIAXXXXXXXXXXXX
# AWS_SECRET_ACCESS_KEY=XXXXXXXXXXXXXXXXXXXX
# AWS_REGION=us-east-1
# AWS_S3_BUCKET=rez-production-uploads

# =============================================
# OCR SERVICE (For bill scanning)
# =============================================
GOOGLE_CLOUD_VISION_API_KEY=XXXXXXXXXXXXXXXXXXXX

# =============================================
# PUSH NOTIFICATIONS
# =============================================
FCM_SERVER_KEY=XXXXXXXXXXXXXXXXXXXX

# =============================================
# MONITORING & ERROR TRACKING (Highly Recommended)
# =============================================
# Sentry - https://sentry.io
SENTRY_DSN=https://xxxx@sentry.io/xxxx

# New Relic APM - https://newrelic.com
NEW_RELIC_LICENSE_KEY=XXXXXXXXXXXXXXXXXXXX
NEW_RELIC_APP_NAME=REZ Backend Production
NEW_RELIC_LOG_LEVEL=info

# Prometheus Metrics
PROMETHEUS_ENABLED=true
METRICS_PORT=9090

# =============================================
# SECURITY SETTINGS
# =============================================
BCRYPT_ROUNDS=12
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Disable rate limiting only for testing (set to false in production!)
DISABLE_RATE_LIMIT=false

# =============================================
# LOGGING
# =============================================
LOG_LEVEL=info
LOG_FILE=/var/log/rez/app.log

# =============================================
# PRODUCTION FLAGS
# =============================================
DEBUG_MODE=false
SEED_DATABASE=false
AUTO_CREATE_INDEXES=false

# =============================================
# FILE UPLOAD LIMITS
# =============================================
MAX_FILE_SIZE=10485760
UPLOAD_PATH=/var/uploads
ALLOWED_IMAGE_TYPES=jpg,jpeg,png,gif,webp
ALLOWED_VIDEO_TYPES=mp4,mov,webm
